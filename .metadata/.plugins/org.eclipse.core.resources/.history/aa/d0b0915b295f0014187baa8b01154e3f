package au.edu.jcu.it.numbergame.gameactivity;

import java.util.ArrayList;

import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Color;
import android.graphics.Paint;
import android.graphics.Point;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.view.Display;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;

public class Card extends Fragment {

	int width;
	int height;
	int textSize;
	MyView myView;
	
	ArrayList<Integer> cardNumbers;

	@Override
	public View onCreateView(LayoutInflater inflater, ViewGroup container,
			Bundle savedInstanceState) {
		
		Display display = this.getActivity().getWindowManager().getDefaultDisplay();
		Point size = new Point();
		display.getSize(size);
		width = size.x;
		height = size.y;
		textSize = this.getActivity().getApplicationContext().getResources()
						.getDimensionPixelSize(R.dimen.custom_text_size);
		myView = new MyView(this.getActivity());
		
		return myView;
	}
	
	private class MyView extends View {

		private Paint paint;
		
		public MyView(Context context) {
			super(context);
			paint = new Paint();
			invalidate();
		}
		
		protected void onDraw(Canvas canvas) {
			super.onDraw(canvas);
			
			paint.setStrokeWidth(10);
			canvas.drawLine(50, 120, (width - 50), 120, paint);
			canvas.drawLine(50, 120, 50, (height - 130), paint);
			canvas.drawLine(50, (height - 130), (width - 50), (height - 130), paint);
			canvas.drawLine((width - 50), 120, (width - 50), (height - 130), paint);
			
			paint.setColor(Color.BLACK);
			paint.setAlpha(180);
			canvas.drawRect(50, 120, (width - 50), (height - 130), paint);
			paint.setAlpha(255);
			
			paint.setColor(Color.WHITE);
			paint.setTextSize(textSize);
			int xPosition = 90;
			int yPosition = 240;
			for (int i = 0; i < cardNumbers.size(); i++) {
				canvas.drawText("" + cardNumbers.get(i), xPosition, yPosition, paint);
				xPosition += textSize*1.5;
				if (xPosition > width - 160) {
					xPosition = 90;
					yPosition += textSize*1.5;
				}
			}
		}
	}
}
